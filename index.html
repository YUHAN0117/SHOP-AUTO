<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç²¾é¸å°è³¼å•†å“</title>
  <style>
    body { margin:0; font-family: system-ui, -apple-system, "Noto Sans TC", Arial, sans-serif; background:#0f1620; color:#e9eef5; }
    .wrap { max-width:1100px; margin:0 auto; padding:22px 16px 40px; }
    h1 { margin:10px 0 18px; text-align:center; font-size:28px; }
    .grid { display:grid; grid-template-columns: repeat( auto-fill, minmax(220px,1fr) ); gap:16px; }
    .card { background:#1a2230; border-radius:12px; padding:12px; box-shadow:0 4px 14px rgba(0,0,0,.25); }
    .card img { width:100%; height:180px; object-fit:cover; border-radius:8px; background:#0b111a; }
    .card h3 { font-size:16px; margin:10px 0 6px; line-height:1.35; color:#fff; }
    .price { color:#00e676; font-weight:700; margin:4px 0 10px; }
    .btn { display:inline-block; background:#0b84ff; color:#fff; padding:8px 12px; border-radius:8px; text-decoration:none; font-weight:600; }
    .btn:hover { background:#056bd2; }
    footer { margin-top:28px; text-align:center; color:#9fb1c5; font-size:13px; }
    .qrcode img { width:160px; height:160px; border:6px solid #fff; border-radius:10px; box-shadow:0 0 12px rgba(0,0,0,.45); }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- å•†å“å€ï¼ˆç½®é ‚é¡¯ç¤ºï¼‰ -->
    <h1>ğŸ”¥ ç²¾é¸å°è³¼å•†å“ ğŸ”¥</h1>
    <div class="grid">

      <div class="card">
        <img src="assets/img/S__25632790_0.jpg" alt="è»Šè¼‰ç£å¸æ”¯æ¶" loading="lazy">
        <h3>è»Šè¼‰ç£å¸æ”¯æ¶</h3>
        <p class="price">NT$134</p>
        <a class="btn" href="https://s.shopee.tw/6VEXZe6KES" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632788_0.jpg" alt="é˜²è‡­åœ°æ¼" loading="lazy">
        <h3>é˜²è‡­åœ°æ¼</h3>
        <p class="price">NT$189</p>
        <a class="btn" href="https://s.shopee.tw/113pmORd4" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632773_0.jpg" alt="å¤šåŠŸèƒ½æ»‘é›ªè¨“ç·´å™¨" loading="lazy">
        <h3>å¤šåŠŸèƒ½æ»‘é›ªè¨“ç·´å™¨</h3>
        <p class="price">NT$630</p>
        <a class="btn" href="https://s.shopee.tw/AKRG8ZP8vj" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632787_0.jpg" alt="å®¶ç”¨é™¤èŸæ©Ÿ" loading="lazy">
        <h3>å®¶ç”¨é™¤èŸæ©Ÿ</h3>
        <p class="price">NT$97</p>
        <a class="btn" href="https://s.shopee.tw/9AFIkRuCJD" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632791_0.jpg" alt="æ±½è»Šé®é™½è“¬" loading="lazy">
        <h3>æ±½è»Šé®é™½è“¬</h3>
        <p class="price">NT$406</p>
        <a class="btn" href="https://s.shopee.tw/9zoPk2xjAS" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632789_0.jpg" alt="æ™ºèƒ½éœ§åŒ–è–°é¦™æ©Ÿ" loading="lazy">
        <h3>æ™ºèƒ½éœ§åŒ–è–°é¦™æ©Ÿ</h3>
        <p class="price">NT$99</p>
        <a class="btn" href="https://s.shopee.tw/8KgBl4RYbz" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632786_0.jpg" alt="æŠ˜ç–Šé‹ç›’" loading="lazy">
        <h3>æŠ˜ç–Šé‹ç›’</h3>
        <p class="price">NT$584</p>
        <a class="btn" href="https://s.shopee.tw/2ViOoJflyR" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632792_0.jpg" alt="å…©ä»¶å¼åå…‰é›¨è¡£" loading="lazy">
        <h3>å…©ä»¶å¼åå…‰é›¨è¡£</h3>
        <p class="price">NT$599</p>
        <a class="btn" href="https://s.shopee.tw/7AUEMnQm5J" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632774_0.jpg" alt="äº”åˆä¸€è¡Œå‹•é›»æº 10000mAh" loading="lazy">
        <h3>äº”åˆä¸€è¡Œå‹•é›»æº 10000mAh</h3>
        <p class="price">NT$599</p>
        <a class="btn" href="https://s.shopee.tw/8Uzbx8Y0sU" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

      <div class="card">
        <img src="assets/img/S__25632791_0.jpg" alt="å¾Œå‚™ç®±æ”¶ç´ç¥å™¨" loading="lazy">
        <h3>å¾Œå‚™ç®±æ”¶ç´ç¥å™¨</h3>
        <p class="price">NT$323</p>
        <a class="btn" href="https://s.shopee.tw/8KgBkxR9bI" target="_blank">å‰å¾€è³¼è²·</a>
      </div>

    </div>

    <!-- QR Sectionï¼ˆæƒ³é¡¯ç¤ºå°±ç•™ï¼Œæƒ³æ‹¿æ‰å°±æ•´æ®µåˆªæ‰ï¼‰ -->
    <section class="qrcode" style="text-align:center; margin:32px 0 8px;">
      <h3>ğŸ“± ä¹Ÿå¯æƒæ QR Code é€²ç«™</h3>
      <img src="assets/img/qrcode.png?v=1" alt="å°è³¼ç«™ QR Code" loading="lazy">
    </section>

    <footer>æœ€å¾Œæ›´æ–°ï¼š<span id="ts"></span></footer>
  </div>

<script>
// ç©©å®š CSV è§£æï¼ˆæ”¯æ´å«é€—è™Ÿ/å¼•è™Ÿï¼‰
function parseCSV(text) {
  const rows = [];
  let row = [], val = '', inQuotes = false;

  for (let i = 0; i < text.length; i++) {
    const c = text[i], n = text[i+1];
    if (inQuotes) {
      if (c === '"' && n === '"') { val += '"'; i++; }      // è½‰ç¾©é›™å¼•è™Ÿ ""
      else if (c === '"') { inQuotes = false; }
      else { val += c; }
    } else {
      if (c === '"') inQuotes = true;
      else if (c === ',') { row.push(val.trim()); val = ''; }
      else if (c === '\n' || c === '\r') {
        if (val !== '' || row.length) { row.push(val.trim()); rows.push(row); row = []; val = ''; }
        if (c === '\r' && n === '\n') i++;                  // è™•ç† \r\n
      } else { val += c; }
    }
  }
  if (val !== '' || row.length) { row.push(val.trim()); rows.push(row); }

  const headers = (rows.shift() || []).map(h => h.trim());
  return rows.map(r => {
    const obj = {};
    headers.forEach((h, i) => obj[h] = (r[i] || '').trim());
    return obj;
  });
}

function renderProducts(list) {
  const grid = document.getElementById('productGrid');
  grid.innerHTML = '';
  let shown = 0;

  list.forEach(p => {
    const isActive = String(p.active || '').toLowerCase();
    if (isActive && isActive !== 'false' && isActive !== '0') {
      const img = p.image || 'assets/img/no-image.jpg';
      grid.insertAdjacentHTML('beforeend', `
        <div class="card">
          <img src="${img}" alt="${p.title || ''}" onerror="this.src='assets/img/no-image.jpg'">
          <h3>${p.title || ''}</h3>
          <p class="price">${p.price ? 'NT$' + p.price : ''}</p>
          <p class="rating">${p.rating ? 'â­ ' + p.rating : ''}</p>
          <p class="category">${[p.category, p.tags].filter(Boolean).join('ï½œ')}</p>
          <a class="btn" href="${p.affiliate_url || '#'}" target="_blank" rel="nofollow noopener">å‰å¾€è³¼è²·</a>
        </div>
      `);
      shown++;
    }
  });

  if (!shown) grid.innerHTML = 'ï¼ˆæ²’æœ‰å¯é¡¯ç¤ºçš„å•†å“ï¼‰';
}

// è®€å– data/products.csvï¼ˆåŠ ä¸Šæ™‚é–“æˆ³é¿å…å¿«å–ï¼‰
fetch("data/products.csv?t=" + Date.now(), { cache: 'no-store' })
  .then(r => { if (!r.ok) throw new Error('HTTP ' + r.status); return r.text(); })
  .then(text => renderProducts(parseCSV(text)))
  .catch(err => {
    document.getElementById('productGrid').innerHTML =
      'âŒ è¼‰å…¥å•†å“è³‡æ–™å¤±æ•—ï¼š' + (err && err.message ? err.message : err);
  });
</script>
</body>
</html>
